/**
 * Imgur extension for phpBB.
 * @author Alfredo Ramos <alfredo.ramos@yandex.com>
 * @copyright 2017 Alfredo Ramos
 * @license GPL-2.0-only
 */
"use strict";function isJSON(e){if("string"!=typeof e)return!1;let t=null;try{t=JSON.parse(e)}catch(n){return!1}return"object"==typeof t&&null!==t}function showImgurErrors(e){if(!Array.isArray(e)||e.length<=0)return;let t="";e.forEach(function(n,r){n&&(t+=n,r<e.length-1&&(t+="<br>"))}),t.length<=0||window.phpbb.alert(window.imgur.lang.error,t)}function formatImageSize(e){const t=1024,n=3;let r=e,i=window.imgur.lang.byte;return e>=t*t?(r/=t*t,i=window.imgur.lang.mebiByte):e>=t&&(r/=t,i=window.imgur.lang.kibiByte),(r=r.toFixed(n))+" "+i}function fillOutputFields(e){!Array.isArray(e)||e.length<=0||e.forEach(function(e){if(!e)return;let t,n=e[0],r=e[1],i=document.body.querySelector('[name="imgur_output_'+n+'"]');i&&(i.value=i.value.trim(),(r=r.trim()).length<=0||(i.value+=(i.value.length>0?"\n":"")+r,"function"!=typeof Event?(t=document.createEvent("Event")).initEvent("change",!0,!0):t=new Event("change",{bubbles:!0,cancelable:!0}),i.dispatchEvent(t)))})}function getOutputType(e){let t="image";if(!e.enabled)return t;let n=window.localStorage.getItem(e.local),r=window.imgur.config.types.split(",");if("null"!==n&&null!==n||(n=t),r.length>0&&r.indexOf(n)<0){let t=r.indexOf("image");n=r[t=t<0?0:t],window.localStorage.setItem(e.local,n)}return n}
